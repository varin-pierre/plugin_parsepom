<div class="row">
  	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  		<a href="jsp/site/Portal.jsp?page=parsepom" class="btn btn-warning" role="button">#i18n{parsepom.util.labelHome}</a>
  		<br /><br />
  		<@messages errors=errors />
	    <@messages infos=infos />
  		<div class="panel panel-info">
  			<div class="panel-heading">
     			<h3 class="panel-title">${site.artifactId}<font size="2"> (${site.name})</font> - ${site.version}</h3>
     			<font size="2">#i18n{parsepom.details_site.lastUpdate} : <em>${site.lastUpdate}</em></font>
     			<div class="pull-right">
     				<h3 class="panel-title">
     					<a style="margin-top:-15px;" href="jsp/site/Portal.jsp?page=site&action=downloadPom&id=${site.id}" class="btn btn-primary" role="button"><font color="white">#i18n{parsepom.details_site.downloadPom}</font></a>
     				</h3>
     			</div>
   			</div>
   			<div class="panel-body">
   				<#assign c = 0>
            	<#assign d = 0>
            	<#assign l = 0>
            	<#assign m = 0>
            	<#assign o = 0>
            	<#assign p = 0>
            	<#assign s = 0>
            	<#assign listArtifactId = []>
            	<#assign listVersion = []>
            	<#list dependency_list_by_site as depend>
	                <#assign listArtifactId = listArtifactId + [ "${depend.artifactId}" ]>
	                <#assign listVersion = listVersion + [ "${depend.version}" ]>
	                <#assign lenArtifactId = "${depend.artifactId?length}"?number>
	                <#assign lenVersion = "${depend.version?length}"?number>
	                <#if lenArtifactId gte 6>
	                	<#if "${listArtifactId[d]}" == "lutece-core">
	                		<#assign c = c + 1/>
	                	</#if>
		                <#if "${listArtifactId[d]?substring(0,6)}" == "plugin">
		                	<#assign p = p + 1/>
		                </#if>
		                <#if "${listArtifactId[d]?substring(0,6)}" == "module">
		                	<#assign m = m + 1/>
		                </#if>
		            </#if>
		            <#if lenArtifactId gte 7>
		                <#if "${listArtifactId[d]?substring(0,7)}" == "library">
		                	<#assign l = l + 1/>
		                </#if>
		            </#if>
		            <#if lenVersion gte 8>
		            	<#if "${listVersion[d]}"?index_of("SNAPSHOT") != -1>
		            		<#assign index = "${listVersion[d]}"?index_of("SNAPSHOT")>
			                <#if "${listVersion[d]?substring(index,index + 8)}" == "SNAPSHOT">
			                	<#assign s = s + 1/>
			                </#if>
		                </#if>
		            </#if>
		            <#if "${listArtifactId[d]?substring(0,3)}" != "lib" && "${listArtifactId[d]?substring(0,3)}" != "mod" && 
		            "${listArtifactId[d]?substring(0,3)}" != "plu" && "${listArtifactId[d]?substring(0,3)}" != "lut">
		             	<#assign o = o + 1/>
		            </#if>
	                <#assign d = d + 1>
                </#list>        
				<p>#i18n{parsepom.details_site.fieldNbTotalDependency} : ${d}<br />
				-> #i18n{parsepom.details_site.fieldNbCore} : ${c}<br />
				-> #i18n{parsepom.details_site.fieldNbPlugins} : ${p}<br />
				-> #i18n{parsepom.details_site.fieldNbModules} : ${m}<br />
				-> #i18n{parsepom.details_site.fieldNbLibraries} : ${l}<br />
				-> #i18n{parsepom.details_site.fieldNbOthers} : ${o}<br /></p>
				<#assign ratio = "${s}"?number / "${d}"?number * 100>
				<p>#i18n{parsepom.details_site.fieldNbSnapshots} : ${s} (${ratio?round}%)</p>
				<p>#i18n{parsepom.details_site.fieldLastUpdate} : 
				<#if "${last_update_time_interval}"?number == 0>
					#i18n{parsepom.details_site.fieldDate1}
				<#elseif "${last_update_time_interval}"?number lt 12>
					#i18n{parsepom.details_site.fieldDate2}
				<#elseif "${last_update_time_interval}"?number == 12>
					#i18n{parsepom.details_site.fieldDate3}
				<#elseif "${last_update_time_interval}"?number gt 12 && "${last_update_time_interval}"?number lt 24>
					<#assign result = "${last_update_time_interval}"?number - 12>
					#i18n{parsepom.details_site.fieldDate4}
				<#elseif "${last_update_time_interval}"?number == 24>
					#i18n{parsepom.details_site.fieldDate5}
				<#elseif "${last_update_time_interval}"?number gt 24 && "${last_update_time_interval}"?number lt 36>
					#i18n{parsepom.details_site.fieldDate6}
				<#elseif "${last_update_time_interval}"?number gte 60>
					#i18n{parsepom.details_site.fieldDate7}
				</#if></p>
			</div>
   			<table id="myTableSite" class="table"> 
   				<thead>
                <tr>
                    <th id="first">#i18n{parsepom.details_site.columnGroupId}</th>
                    <th id="second">#i18n{parsepom.details_site.columnArtifactId}</th>
                    <th id="third">#i18n{parsepom.details_site.columnVersion}</th>
                    <th id="fourth">#i18n{parsepom.details_site.columnType}</th>
                    <th id="fifth">#i18n{parsepom.details_site.columnLastRelease}</th>
                </tr>
            </thead>
            <tbody>
            	<#list dependency_list_by_site as depend>
                <tr id="hover_tr">
                    <td><a href="jsp/site/Portal.jsp?page=dependency&view=detailsDependency&id=${depend.id}">${depend.groupId}</a></td>
                    <td><a href="jsp/site/Portal.jsp?page=dependency&view=detailsDependency&id=${depend.id}">${depend.artifactId}</a></td>
                    <td><a href="jsp/site/Portal.jsp?page=dependency&view=detailsDependency&id=${depend.id}">${depend.version}</a></td>
                    <td><a href="jsp/site/Portal.jsp?page=dependency&view=detailsDependency&id=${depend.id}">${depend.type}</a></td>
                    <#if last_release_list?has_content>
	                    <#list last_release_list?keys as key>
	                    	<#if "${key}" == "${depend.artifactId}">
	                    		<td><a href="jsp/site/Portal.jsp?page=dependency&view=detailsDependency&id=${depend.id}">${last_release_list[key]}</a></td>
	                    	</#if>
	                    </#list>
	                <#else>
                    	<td>#i18n{parsepom.details_site.nonAvailable}</td>
                   	</#if>
                </tr>
                </#list>                      
            </tbody>
   			</table>
   			
  		</div>
  		<a href="jsp/site/Portal.jsp?page=parsepom" class="btn btn-warning" role="button">#i18n{parsepom.util.labelHome}</a>
  	</div>
</div>